<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sign Up | SATurn Bound</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="icon" href="images/Logo.png" type="image/png">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg-top:#e9f2ff;
  --bg-mid:#cfe2ff;
  --bg-btm:#b7d4ff;
  --text:#0d1117;
  --muted:#546170;
  --brand:#2156ff;
  --brand-dark:#133aa5;
  --danger:#c62828;
  --warn:#d97706;
  --ok:#2e7d32;
  --panel:rgba(255,255,255,.58);
}
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:"Inter",Helvetica,Arial,sans-serif;
  background:linear-gradient(180deg,var(--bg-top)0%,var(--bg-mid)45%,var(--bg-btm)100%);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  min-height:100vh;
  display:flex;
  flex-direction:column;
  scroll-behavior:smooth;
}

/* ===== Header (shared) ===== */
header{
  position:fixed;top:0;left:0;width:100%;z-index:1000;
  padding:.6rem 1.4rem;
  display:flex;justify-content:space-between;align-items:center;
  background:rgba(255,255,255,.55);
  backdrop-filter:saturate(180%) blur(14px);
  transition:box-shadow .3s;
}
header.scrolled{box-shadow:0 2px 8px rgba(0,0,0,.12);}
.brand{display:flex;align-items:center;gap:.65rem;font-weight:700;font-size:1rem;letter-spacing:.02em}
.brand img{width:44px;height:44px;border-radius:50%;object-fit:cover;border:2px solid #fff;box-shadow:0 2px 6px rgba(0,0,0,.2)}
nav{display:flex;gap:1.1rem;font-size:.92rem;font-weight:500}
nav a{padding:.35rem .65rem;border-radius:8px;text-decoration:none;color:inherit;transition:background .25s}
nav a:hover{background:rgba(0,0,0,.06)}
nav a.active{background:rgba(0,0,0,.08)}
@media(max-width:760px){nav{display:none}}

main{flex:1;display:flex;align-items:center;justify-content:center;padding:120px 1rem 70px}

/* ===== Panel ===== */
.panel{
  width:100%;max-width:480px;
  background:var(--panel);
  backdrop-filter:blur(18px);
  border:1px solid rgba(255,255,255,.5);
  border-radius:34px;
  padding:2.4rem 2.2rem 2.6rem;
  box-shadow:0 22px 52px -14px rgba(0,0,0,.28);
  display:flex;flex-direction:column;gap:1.4rem;
  position:relative;
  opacity:0;transform:translateY(42px);
  animation:panelIn .9s cubic-bezier(.19,1,.22,1) .1s forwards;
}
@keyframes panelIn{to{opacity:1;transform:none}}

.panel h1{
  font-size:2rem;
  line-height:1.15;
  font-weight:700;
  letter-spacing:.5px;
  text-align:center;
}
.panel p.lead{
  font-size:.93rem;
  text-align:center;
  color:var(--muted);
  margin-top:-.6rem;
}

form{display:flex;flex-direction:column;gap:1.05rem;margin-top:.3rem}
.field{display:flex;flex-direction:column;gap:.5rem}
.field label{
  font-size:.72rem;
  font-weight:600;
  letter-spacing:.12em;
  text-transform:uppercase;
  color:#425165;
}
.field input{
  padding:.8rem .9rem;
  border:1px solid #c6d3e7;
  border-radius:14px;
  background:#fff;
  font-size:.95rem;
  font-family:inherit;
  color:#000;
  transition:border-color .25s, box-shadow .25s;
  width:100%;
}
.field input:focus{
  outline:none;
  border-color:var(--brand);
  box-shadow:0 0 0 3px rgba(33,86,255,.25);
}

.inline-row{display:flex;gap:.9rem;flex-wrap:wrap}
.inline-row .field{flex:1 1 180px}

.pw-wrap{position:relative;display:flex;align-items:center}
.pw-wrap input{width:100%;padding-right:3.1rem}
.toggle-pw{
  position:absolute;right:10px;top:50%;transform:translateY(-50%);
  background:rgba(33,86,255,.08);color:var(--brand);font-size:.7rem;
  border:none;border-radius:20px;padding:.35rem .65rem;cursor:pointer;
  font-weight:600;letter-spacing:.05em;
}
.toggle-pw:hover{background:rgba(33,86,255,.16)}

.strength{
  display:flex;align-items:center;gap:.55rem;font-size:.67rem;font-weight:600;letter-spacing:.1em;text-transform:uppercase;
}
.strength-bars{display:flex;gap:4px;flex:1}
.strength-bars span{
  flex:1;height:6px;border-radius:4px;background:#d2d8e2;transition:background .35s,width .35s;
}

.agree{
  display:flex;align-items:flex-start;gap:.55rem;
  font-size:.74rem;line-height:1.3;
  color:var(--muted);
}
.agree input{margin-top:2px;transform:scale(1.05)}

button.primary{
  background:var(--brand);
  color:#fff;
  font-weight:600;
  font-size:.97rem;
  padding:.9rem 1.4rem;
  border:none;
  border-radius:20px;
  cursor:pointer;
  transition:background .25s,transform .25s;
  width:100%;
  margin-top:.2rem;
}
button.primary:hover{background:var(--brand-dark);transform:translateY(-2px)}
button.primary:active{transform:translateY(0)}

.separator{
  display:flex;align-items:center;gap:.75rem;
  font-size:.7rem;font-weight:600;letter-spacing:.15em;
  color:#5a6879;text-transform:uppercase;margin:2px 0;
}
.separator::before,.separator::after{
  content:"";flex:1;height:1px;background:linear-gradient(90deg,transparent,#8ca3c7,transparent);
}

button.google{
  width:100%;
  display:flex;align-items:center;justify-content:center;
  gap:.6rem;
  background:#fff;
  color:#202124;
  border:1px solid #d0dae7;
  font-weight:600;
  padding:.82rem .9rem;
  border-radius:20px;
  cursor:pointer;
  transition:box-shadow .25s,border-color .25s;
  font-size:.9rem;
}
button.google:hover{border-color:#b5c3d9;box-shadow:0 4px 14px -4px rgba(0,0,0,.18)}
button.google svg{width:18px;height:18px;flex:0 0 18px}

#passwordHints{
  font-size:.67rem;
  line-height:1.3;
  color:#5a6879;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
  gap:.35rem .9rem;
  margin-top:-.55rem;
}
#passwordHints span.good{color:var(--ok);font-weight:600}
#passwordHints span.warn{color:var(--warn);font-weight:600}
#passwordHints span.bad{color:var(--danger);font-weight:600}

#errorMsg{
  min-height:20px;
  font-size:.74rem;
  font-weight:600;
  letter-spacing:.04em;
  color:var(--danger);
  white-space:pre-line;
  margin-top:-.2rem;
}

.success-msg{
  display:none;
  font-size:.8rem;
  font-weight:600;
  color:var(--ok);
  letter-spacing:.05em;
  text-align:center;
  margin-top:-.2rem;
}

.footer-note{
  text-align:center;
  font-size:.72rem;
  color:var(--muted);
  margin-top:.2rem;
}

footer{
  padding:1rem 1rem 2rem;
  text-align:center;
  font-size:.7rem;
  color:#546170;
}
footer a{color:var(--brand)}
footer a:hover{text-decoration:underline}
</style>
</head>
<body>

<header id="siteHeader">
  <div class="brand">
    <img src="images/Logo.png" alt="SATurn Bound logo">
    <span>SATurn&nbsp;Bound</span>
  </div>
  <nav>
    <a href="index.html">Home</a>
    <a href="aboutus.html">Our Team</a>
    <a href="login.html">Log In</a>
    <a href="signup.html" class="active">Sign Up</a>
  </nav>
</header>

<main>
  <div class="panel">
    <h1>Create Account</h1>
    <p class="lead">Start building your adaptive SAT study plan.</p>

    <form id="signupForm" novalidate>
      <div class="field">
        <label for="name">Full Name*</label>
        <input id="name" type="text" autocomplete="name" placeholder="Your full name" required>
      </div>

      <div class="field">
        <label for="email">Email*</label>
        <input id="email" type="email" autocomplete="email" placeholder="you@example.com" required>
      </div>

      <div class="inline-row">
        <div class="field" style="flex:1">
          <label for="password">Password*</label>
          <div class="pw-wrap">
            <input id="password" type="password" autocomplete="new-password" placeholder="••••••••" required>
            <button type="button" class="toggle-pw" data-target="password">Show</button>
          </div>
        </div>
        <div class="field" style="flex:1">
          <label for="confirmPassword">Confirm*</label>
            <div class="pw-wrap">
              <input id="confirmPassword" type="password" autocomplete="new-password" placeholder="Repeat password" required>
              <button type="button" class="toggle-pw" data-target="confirmPassword">Show</button>
            </div>
        </div>
      </div>

      <div class="strength" id="strengthRow" aria-live="polite">
        <span>Strength:</span>
        <div class="strength-bars" id="strengthBars">
          <span></span><span></span><span></span><span></span>
        </div>
        <span id="strengthLabel" style="min-width:62px;text-align:right;">—</span>
      </div>

      <div id="passwordHints">
        <span id="lenHint"      class="bad">≥ 8 chars</span>
        <span id="upperHint"    class="bad">Uppercase</span>
        <span id="lowerHint"    class="bad">Lowercase</span>
        <span id="digitHint"    class="bad">Digit</span>
        <span id="symbolHint"   class="bad">Symbol</span>
      </div>

      <div class="agree">
        <input id="agree" type="checkbox" required>
        <label for="agree">I agree to the <a href="#" style="color:var(--brand);font-weight:600;">Terms</a> &amp; <a href="#" style="color:var(--brand);font-weight:600;">Privacy Policy</a>.</label>
      </div>

      <div id="errorMsg"></div>
      <div class="success-msg" id="successMsg">Account created! Redirecting…</div>

      <button type="submit" class="primary" id="emailSignupBtn">Sign Up with Email</button>
    </form>

    <div class="separator">OR</div>

    <button id="googleSignUp" class="google" type="button" aria-label="Sign up with Google">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path fill="#EA4335" d="M12 11.988v3.84h5.42c-.22 1.24-1.64 3.63-5.42 3.63-3.26 0-5.92-2.7-5.92-6.03s2.66-6.03 5.92-6.03c1.86 0 3.12.79 3.84 1.48l2.62-2.54C16.8 4.86 14.6 3.9 12 3.9 6.96 3.9 2.9 7.96 2.9 12.99s4.06 9.09 9.1 9.09c5.26 0 8.74-3.69 8.74-8.89 0-.6-.06-.94-.14-1.45H12z"/>
      </svg>
      Continue with Google
    </button>

    <div class="footer-note">
      Already have an account? <a href="login.html" style="color:var(--brand);font-weight:600;">Log in</a>
    </div>
  </div>
</main>

<footer>
  &copy; SATurn Bound 2025. All rights reserved.
</footer>

<!-- Firebase Auth -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-app.js";
import {
  getAuth,
  createUserWithEmailAndPassword,
  updateProfile,
  GoogleAuthProvider,
  signInWithPopup
} from "https://www.gstatic.com/firebasejs/11.8.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyDedw_zEK-L-AoKO1WkeomLVztoRnYBXt4",
  authDomain: "saturn-bound.firebaseapp.com",
  projectId: "saturn-bound",
  storageBucket: "saturn-bound.appspot.com",
  messagingSenderId: "46027081851",
  appId: "1:46027081851:web:8402230dc2ff241c6cfade"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

/* Elements */
const signupForm  = document.getElementById('signupForm');
const nameInput   = document.getElementById('name');
const emailInput  = document.getElementById('email');
const pwInput     = document.getElementById('password');
const pw2Input    = document.getElementById('confirmPassword');
const agreeChk    = document.getElementById('agree');
const errorMsg    = document.getElementById('errorMsg');
const successMsg  = document.getElementById('successMsg');
const bars        = [...document.querySelectorAll('#strengthBars span')];
const strengthLbl = document.getElementById('strengthLabel');

/* Hint spans */
const lenHint   = document.getElementById('lenHint');
const upperHint = document.getElementById('upperHint');
const lowerHint = document.getElementById('lowerHint');
const digitHint = document.getElementById('digitHint');
const symbolHint= document.getElementById('symbolHint');

/* Password strength logic */
pwInput.addEventListener('input', updateStrength);
function updateStrength(){
  const v = pwInput.value;
  const checks = {
    len: v.length >= 8,
    upper: /[A-Z]/.test(v),
    lower: /[a-z]/.test(v),
    digit: /[0-9]/.test(v),
    symbol: /[^A-Za-z0-9]/.test(v)
  };
  // Update hint classes
  Object.entries(checks).forEach(([k,ok])=>{
    const el = ({len:lenHint, upper:upperHint, lower:lowerHint, digit:digitHint, symbol:symbolHint})[k];
    el.className = ok ? 'good' : 'bad';
  });

  const score = Object.values(checks).filter(Boolean).length;
  bars.forEach((b,i)=>{ b.style.background = i < score ? strengthColor(score) : '#d2d8e2'; });
  strengthLbl.textContent = strengthLabel(score);
}

function strengthColor(score){
  switch(score){
    case 0:
    case 1: return '#c62828';
    case 2: return '#ef6c00';
    case 3: return '#f9a825';
    case 4: return '#7cb342';
    case 5: return '#2e7d32';
  }
}
function strengthLabel(score){
  return ['Very Weak','Weak','Fair','Good','Strong','Excellent'][score] || '—';
}

/* Toggle password show/hide */
document.querySelectorAll('.toggle-pw').forEach(btn=>{
  btn.addEventListener('click',()=>{
    const target = document.getElementById(btn.dataset.target);
    const showing = target.type === 'text';
    target.type = showing ? 'password' : 'text';
    btn.textContent = showing ? 'Show' : 'Hide';
  });
});

/* Email Sign Up */
signupForm.addEventListener('submit', async e=>{
  e.preventDefault();
  errorMsg.textContent=''; successMsg.style.display='none';

  const name  = nameInput.value.trim();
  const email = emailInput.value.trim();
  const pw    = pwInput.value;
  const pw2   = pw2Input.value;

  if(!name || !email || !pw || !pw2){
    errorMsg.textContent='Please fill in all required fields.'; return;
  }
  if(pw !== pw2){
    errorMsg.textContent='Passwords do not match.'; return;
  }
  if(!agreeChk.checked){
    errorMsg.textContent='You must accept the terms.'; return;
  }
  // Basic strength check: at least 3 conditions & length >= 8
  const conditions = [/[A-Z]/, /[a-z]/, /[0-9]/, /[^A-Za-z0-9]/].filter(r=>r.test(pw)).length;
  if(pw.length < 8 || conditions < 2){
    errorMsg.textContent='Password too weak (use 8+ chars incl. variety).'; return;
  }

  try{
    const cred = await createUserWithEmailAndPassword(auth, email, pw);
    if(name){
      await updateProfile(cred.user,{displayName:name});
    }
    successMsg.style.display='block';
    setTimeout(()=>window.location.href='dashboard.html', 900);
  }catch(err){
    errorMsg.textContent = friendlyError(err);
  }
});

/* Google Sign Up */
document.getElementById('googleSignUp').addEventListener('click', async ()=>{
  errorMsg.textContent=''; successMsg.style.display='none';
  const provider = new GoogleAuthProvider();
  try{
    await signInWithPopup(auth, provider);
    successMsg.style.display='block';
    successMsg.textContent='Signed in with Google! Redirecting…';
    setTimeout(()=>window.location.href='dashboard.html', 700);
  }catch(err){
    errorMsg.textContent = friendlyError(err);
  }
});

/* Friendly error messages */
function friendlyError(err){
  const code = err.code || '';
  if(code.includes('email-already-in-use')) return 'Email already in use. Try logging in.';
  if(code.includes('invalid-email')) return 'Invalid email format.';
  if(code.includes('weak-password')) return 'Password too weak.';
  if(code.includes('operation-not-allowed')) return 'Email/password sign-up disabled.';
  return 'Error: ' + (err.message || 'Unknown issue');
}

/* Header shadow */
const hdr = document.getElementById('siteHeader');
window.addEventListener('scroll',()=>hdr.classList.toggle('scrolled',window.scrollY>20));

/* Initialize strength on load */
updateStrength();
</script>
</body>
</html>
